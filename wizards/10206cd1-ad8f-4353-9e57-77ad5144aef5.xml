<wizardCommand author="Repetier" description="A wizard to calibrate the steps/mm for your extruder" icon="&lt;svg version=&quot;1.1&quot; viewBox=&quot;-10 0 813 1000&quot;&gt;&#xA;   &lt;path fill=&quot;currentColor&quot; d=&quot;M742.9 692.005c1.37012 14.1963 1.37012 28.4482 0 42.6445l35.7354 20.627c10.5771 6.10645 15.7061 18.5645 12.543 30.3613c-12.7988 47.7275 -37.9775 90.3896 -71.8867 124.336c-8.61914 8.62793 -21.9668 10.376 -32.5273 4.27734l-35.6689 -20.6016&#xA;c-11.5234 8.24609 -23.8926 15.4121 -36.9199 21.3428v41.2451c0 12.2148 -8.21875 22.9014 -20.0244 26.041c-46.9229 12.4805 -96.6982 12.4639 -143.563 0c-11.5166 -3.06445 -20.0205 -13.5664 -20.0225 -26.042v-41.2441&#xA;c-13.0273 -5.93066 -25.3975 -13.0967 -36.9189 -21.3447l-35.6689 20.6016c-10.5605 6.10059 -23.9092 4.35059 -32.5273 -4.27539c-33.9092 -33.9482 -59.0898 -76.6084 -71.8867 -124.338c-3.16309 -11.7959 1.96582 -24.2529 12.5439 -30.3594l35.7334 -20.6289&#xA;c-0.68457 -7.08984 -1.03516 -13.8301 -1.03516 -21.0977c0 -7.26855 0.350586 -14.4561 1.03516 -21.5449l-35.7334 -20.6289c-10.5781 -6.10547 -15.707 -18.5645 -12.5439 -30.3604c12.7969 -47.7295 37.9775 -90.3896 71.8867 -124.336&#xA;c8.61816 -8.62793 21.9668 -10.3779 32.5273 -4.27734l35.6689 20.6016c11.5234 -8.24805 23.8916 -15.4141 36.9189 -21.3447v-41.2441c0 -12.2158 8.2207 -22.9023 20.0254 -26.042c46.9219 -12.4795 96.6992 -12.4639 143.563 0.000976562&#xA;c11.5166 3.06348 20.0205 13.5674 20.0215 26.041v41.2461c13.0283 5.92969 25.3965 13.0967 36.9199 21.3438l35.6689 -20.6025c10.5605 -6.09863 23.9082 -4.35059 32.5273 4.27734c33.9092 33.9473 59.0879 76.6074 71.8867 124.337&#xA;c3.16309 11.7969 -1.96582 24.2539 -12.543 30.3594zM683.784 762.725c8.56641 -46.3682 8.56445 -52.4473 0 -98.7959l49.1738 -28.3779c-8.9209 -24.0918 -21.8477 -46.2881 -37.9844 -65.6816l-49.1865 28.4023c-35.8789 -30.7344 -41.1436 -33.7559 -85.4756 -49.4111&#xA;v-56.7822c-12.4014 -2.11719 -24.7314 -3.21875 -37.7324 -3.21875c-13.0029 0 -25.7471 1.10156 -38.1484 3.21875v56.7812c-44.3359 15.6562 -49.583 18.665 -85.4766 49.4102l-49.1846 -28.4023c-16.3164 19.6162 -29.1768 41.8594 -37.9854 65.6816l49.1738 28.3799&#xA;c-8.56641 46.3682 -8.5625 52.4502 0 98.7959l-49.1738 28.3799c8.9209 24.0928 21.8457 46.2881 37.9854 65.6807l49.1846 -28.4023c35.8799 30.7344 41.1445 33.7559 85.4766 49.4092v56.7832c12.4014 2.11621 24.7324 3.21973 37.7324 3.21973&#xA;c13.001 0 25.7471 -1.10352 38.1484 -3.21973v-56.7832c44.3379 -15.6562 49.583 -18.6631 85.4756 -49.4092l49.1865 28.4023c16.1367 -19.3926 29.0635 -41.5879 37.9844 -65.6807zM522.371 605.596c59.4043 0 107.731 48.3271 107.731 107.731&#xA;s-48.3271 107.731 -107.731 107.731s-107.731 -48.3271 -107.731 -107.731s48.3271 -107.731 107.731 -107.731zM522.371 767.193c29.7031 0 53.8662 -24.1631 53.8662 -53.8662c0 -29.7012 -24.1631 -53.8662 -53.8662 -53.8662s-53.8662 24.165 -53.8662 53.8662&#xA;c0 29.7031 24.1631 53.8662 53.8662 53.8662zM0 0h500v231h-154v88l-96 105l-96 -105v-88h-154v-231z&quot; ! &lt; svg&gt;&lt;/path&gt;&lt;/svg&gt;" name="Extruder Calibration" source="0" uuid="10206cd1-ad8f-4353-9e57-77ad5144aef5" version="2" visibleWhenPrinting="0">
@set global.icon '&lt;svg version=&quot;1.1&quot; viewBox=&quot;-10 0 813 1000&quot;&gt;   &lt;path fill=&quot;currentColor&quot; d=&quot;M742.9 692.005c1.37012 14.1963 1.37012 28.4482 0 42.6445l35.7354 20.627c10.5771 6.10645 15.7061 18.5645 12.543 30.3613c-12.7988 47.7275 -37.9775 90.3896 -71.8867 124.336c-8.61914 8.62793 -21.9668 10.376 -32.5273 4.27734l-35.6689 -20.6016c-11.5234 8.24609 -23.8926 15.4121 -36.9199 21.3428v41.2451c0 12.2148 -8.21875 22.9014 -20.0244 26.041c-46.9229 12.4805 -96.6982 12.4639 -143.563 0c-11.5166 -3.06445 -20.0205 -13.5664 -20.0225 -26.042v-41.2441c-13.0273 -5.93066 -25.3975 -13.0967 -36.9189 -21.3447l-35.6689 20.6016c-10.5605 6.10059 -23.9092 4.35059 -32.5273 -4.27539c-33.9092 -33.9482 -59.0898 -76.6084 -71.8867 -124.338c-3.16309 -11.7959 1.96582 -24.2529 12.5439 -30.3594l35.7334 -20.6289c-0.68457 -7.08984 -1.03516 -13.8301 -1.03516 -21.0977c0 -7.26855 0.350586 -14.4561 1.03516 -21.5449l-35.7334 -20.6289c-10.5781 -6.10547 -15.707 -18.5645 -12.5439 -30.3604c12.7969 -47.7295 37.9775 -90.3896 71.8867 -124.336c8.61816 -8.62793 21.9668 -10.3779 32.5273 -4.27734l35.6689 20.6016c11.5234 -8.24805 23.8916 -15.4141 36.9189 -21.3447v-41.2441c0 -12.2158 8.2207 -22.9023 20.0254 -26.042c46.9219 -12.4795 96.6992 -12.4639 143.563 0.000976562c11.5166 3.06348 20.0205 13.5674 20.0215 26.041v41.2461c13.0283 5.92969 25.3965 13.0967 36.9199 21.3438l35.6689 -20.6025c10.5605 -6.09863 23.9082 -4.35059 32.5273 4.27734c33.9092 33.9473 59.0879 76.6074 71.8867 124.337c3.16309 11.7969 -1.96582 24.2539 -12.543 30.3594zM683.784 762.725c8.56641 -46.3682 8.56445 -52.4473 0 -98.7959l49.1738 -28.3779c-8.9209 -24.0918 -21.8477 -46.2881 -37.9844 -65.6816l-49.1865 28.4023c-35.8789 -30.7344 -41.1436 -33.7559 -85.4756 -49.4111v-56.7822c-12.4014 -2.11719 -24.7314 -3.21875 -37.7324 -3.21875c-13.0029 0 -25.7471 1.10156 -38.1484 3.21875v56.7812c-44.3359 15.6562 -49.583 18.665 -85.4766 49.4102l-49.1846 -28.4023c-16.3164 19.6162 -29.1768 41.8594 -37.9854 65.6816l49.1738 28.3799c-8.56641 46.3682 -8.5625 52.4502 0 98.7959l-49.1738 28.3799c8.9209 24.0928 21.8457 46.2881 37.9854 65.6807l49.1846 -28.4023c35.8799 30.7344 41.1445 33.7559 85.4766 49.4092v56.7832c12.4014 2.11621 24.7324 3.21973 37.7324 3.21973c13.001 0 25.7471 -1.10352 38.1484 -3.21973v-56.7832c44.3379 -15.6562 49.583 -18.6631 85.4756 -49.4092l49.1865 28.4023c16.1367 -19.3926 29.0635 -41.5879 37.9844 -65.6807zM522.371 605.596c59.4043 0 107.731 48.3271 107.731 107.731s-48.3271 107.731 -107.731 107.731s-107.731 -48.3271 -107.731 -107.731s48.3271 -107.731 107.731 -107.731zM522.371 767.193c29.7031 0 53.8662 -24.1631 53.8662 -53.8662c0 -29.7012 -24.1631 -53.8662 -53.8662 -53.8662s-53.8662 24.165 -53.8662 53.8662c0 29.7031 24.1631 53.8662 53.8662 53.8662zM0 0h500v231h-154v88l-96 105l-96 -105v-88h-154v-231z&quot; ! &lt; svg&gt;&lt;/path&gt;&lt;/svg&gt;'

@func showEStepsFinalDialog
  @dialogStart &quot;Would you like to calibrate again?&quot; &quot;E-Steps Wizard&quot;
    @dialogIcon {{global.icon}}
    @dialogBlockingJob 
    @dialogButton &quot;No&quot; 
    @dialogButton &quot;Yes&quot; '@eval &quot;@call showEStepsSetupDialog&quot;' 
  @dialogShow
@endfunc

@func setNewEsteps
  M92 E{{global.eStepsNew}}
  M500
  @info &quot;Settings Saved&quot;
  @call showEStepsFinalDialog 
@endfunc

@func showEStepsNewValuesDialog
  @dialogStart &quot;&lt;p&gt;Old E-Steps: {{global.eSteps}} &lt;br&gt; New E-Steps: {{global.eStepsNew}} &lt;br&gt;&lt;br&gt; Should those new values be adopted? &lt;/p&gt;&quot; &quot;E-Steps Wizard&quot;
    @dialogIcon {{global.icon}}
    @dialogBlockingJob 
    @dialogButton &quot;No&quot; 
    @dialogButton &quot;Yes&quot; &quot;@call setNewEsteps&quot; 
  @dialogShow
@endfunc

@func calcualteESteps eActualDistance
  @set global.eStepsNew {{(global.eSteps * global.eDistance) / local.eActualDistance}}
  @call showEStepsNewValuesDialog
@endfunc

@func showEStepsCalibDialog
  @dialogStart &quot;Please enter the actual movement of the filament you measured&quot; &quot;E-Steps Wizard&quot;
    @dialogBlockingJob
    @dialogIcon {{global.icon}}
    @dialogInputDouble &quot;Actual Extruding Distance&quot; eActualDistance default({{global.eDistance}})
    @dialogButton &quot;Cancel&quot; 
    @dialogButton &quot;Calculate&quot; &quot;@call calcualteESteps {{form.eActualDistance}}&quot; 
  @dialogShow
@endfunc

@func showEStepsSetupDialog
  @dialogStart &quot;This is a Wizard for calibrating the Extruder steps per mm. Please make sure your extruder is heated up properly! &quot; &quot;E-Steps Wizard&quot;
    @dialogBlockingJob
    @dialogIcon {{global.icon}}
    @dialogInputInt &quot;Extruding Distance&quot; global.eDistance default(10)
    @dialogInputInt &quot;Current Steps per mm&quot; global.eSteps default(90) 
    @dialogButton &quot;Cancel&quot;
    @dialogButton "Start" "G92 E0\n@moveRel E{{global.eDistance}} F60\n @call showEStepsCalibDialog"
  @dialogShow
@endfunc

@call showEStepsSetupDialog
</wizardCommand>
